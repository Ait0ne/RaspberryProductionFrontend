{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nvar config = {\n  apiKey: \"AIzaSyABugTRykVjU3cO3nkANbnArtyZ_TPix1Q\",\n  authDomain: \"raspberry-dacc1.firebaseapp.com\",\n  databaseURL: \"https://raspberry-dacc1.firebaseio.com\",\n  projectId: \"raspberry-dacc1\",\n  storageBucket: \"raspberry-dacc1.appspot.com\",\n  messagingSenderId: \"435336134829\",\n  appId: \"1:435336134829:web:36258d0b8bdb9bf9810624\",\n  measurementId: \"G-E4XKDDZNWV\"\n};\nexport var createUserProfileDocument = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth, data) {\n    var userRef, snapshot, displayName, email, createdAt;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (userAuth) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            userRef = firestore.doc(\"users/\".concat(userAuth.uid));\n            _context.next = 5;\n            return userRef.get();\n\n          case 5:\n            snapshot = _context.sent;\n\n            if (snapshot.exists) {\n              _context.next = 17;\n              break;\n            }\n\n            displayName = userAuth.displayName, email = userAuth.email;\n            createdAt = new Date();\n            _context.prev = 9;\n            _context.next = 12;\n            return userRef.set(_objectSpread({\n              displayName: displayName,\n              email: email,\n              createdAt: createdAt\n            }, data));\n\n          case 12:\n            _context.next = 17;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](9);\n            console.log('error creating user', _context.t0.message);\n\n          case 17:\n            return _context.abrupt(\"return\", userRef);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[9, 14]]);\n  }));\n\n  return function createUserProfileDocument(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(config);\n}\n\nexport var Fire = function Fire() {\n  if (!firebase.apps.length) {\n    firebase.initializeApp(config);\n  }\n};\n_c = Fire;\nexport var sendMessage = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(message, channel) {\n    var userRef;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            userRef = firestore.collection('Chat').doc(\"\".concat(channel)).collection(\"messages\").doc(\"\".concat(new Date()));\n            _context2.next = 3;\n            return userRef.set({\n              message: message,\n              date: new Date()\n            });\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function sendMessage(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getMessages = function getMessages(channel) {\n  if (!firebase.apps.length) {\n    firebase.initializeApp(config);\n  }\n\n  firebase.firestore().collection('Chat').doc(\"\".concat(channel)).collection(\"messages\").where('message', '>', '').orderBy('date').onSnapshot(function (docs) {\n    var messages = [];\n    docs.forEach(function (doc) {\n      messages.push(doc.data());\n    });\n    console.log(messages);\n  });\n};\nexport var auth = firebase.auth();\nexport var firestore = firebase.firestore();\nvar provider = new firebase.auth.GoogleAuthProvider();\nprovider.setCustomParameters({\n  prompt: 'select_account'\n});\nexport var signInwithGoogle = function signInwithGoogle() {\n  return auth.signInWithPopup(provider);\n};\nvar facebookProvider = new firebase.auth.FacebookAuthProvider();\nfacebookProvider.setCustomParameters({\n  prompt: 'select_account'\n});\nexport var signInWithFacebook = function signInWithFacebook() {\n  return auth.signInWithPopup(facebookProvider)[\"catch\"](function (err) {\n    return alert('Your account is associated with a different Login method!');\n  });\n};\nexport default firebase;\n\nvar _c;\n\n$RefreshReg$(_c, \"Fire\");","map":{"version":3,"sources":["C:/Users/bonaf/Desktop/Projects/Ecommerce/Malinka/frontend/malinka/firebase/firebase.utils.js"],"names":["firebase","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","createUserProfileDocument","userAuth","data","userRef","firestore","doc","uid","get","snapshot","exists","displayName","email","createdAt","Date","set","console","log","message","apps","length","initializeApp","Fire","sendMessage","channel","collection","date","getMessages","where","orderBy","onSnapshot","docs","messages","forEach","push","auth","provider","GoogleAuthProvider","setCustomParameters","prompt","signInwithGoogle","signInWithPopup","facebookProvider","FacebookAuthProvider","signInWithFacebook","err","alert"],"mappings":";;;;;;;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AACA,OAAO,eAAP;AAEA,IAAMC,MAAM,GAAG;AACXC,EAAAA,MAAM,EAAE,yCADG;AAEXC,EAAAA,UAAU,EAAE,iCAFD;AAGXC,EAAAA,WAAW,EAAE,wCAHF;AAIXC,EAAAA,SAAS,EAAE,iBAJA;AAKXC,EAAAA,aAAa,EAAE,6BALJ;AAMXC,EAAAA,iBAAiB,EAAE,cANR;AAOXC,EAAAA,KAAK,EAAE,2CAPI;AAQXC,EAAAA,aAAa,EAAE;AARJ,CAAf;AAWA,OAAO,IAAMC,yBAAyB;AAAA,sEAAG,iBAAOC,QAAP,EAAgBC,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAChCD,QADgC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAG/BE,YAAAA,OAH+B,GAGrBC,SAAS,CAACC,GAAV,iBAAuBJ,QAAQ,CAACK,GAAhC,EAHqB;AAAA;AAAA,mBAIdH,OAAO,CAACI,GAAR,EAJc;;AAAA;AAI/BC,YAAAA,QAJ+B;;AAAA,gBAMhCA,QAAQ,CAACC,MANuB;AAAA;AAAA;AAAA;;AAO1BC,YAAAA,WAP0B,GAOLT,QAPK,CAO1BS,WAP0B,EAOdC,KAPc,GAOLV,QAPK,CAOdU,KAPc;AAQ3BC,YAAAA,SAR2B,GAQf,IAAIC,IAAJ,EARe;AAAA;AAAA;AAAA,mBAUvBV,OAAO,CAACW,GAAR;AACFJ,cAAAA,WAAW,EAAXA,WADE;AAEFC,cAAAA,KAAK,EAALA,KAFE;AAGFC,cAAAA,SAAS,EAATA;AAHE,eAICV,IAJD,EAVuB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAkB7Ba,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC,YAAIC,OAAvC;;AAlB6B;AAAA,6CAqB9Bd,OArB8B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAzBH,yBAAyB;AAAA;AAAA;AAAA,GAA/B;;AA8BP,IAAI,CAACV,QAAQ,CAAC4B,IAAT,CAAcC,MAAnB,EAA2B;AACvB7B,EAAAA,QAAQ,CAAC8B,aAAT,CAAuB7B,MAAvB;AAEH;;AAGD,OAAO,IAAM8B,IAAI,GAAG,SAAPA,IAAO,GAAM;AAClB,MAAI,CAAC/B,QAAQ,CAAC4B,IAAT,CAAcC,MAAnB,EAA2B;AACvB7B,IAAAA,QAAQ,CAAC8B,aAAT,CAAuB7B,MAAvB;AACH;AAER,CALM;KAAM8B,I;AAOb,OAAO,IAAMC,WAAW;AAAA,uEAAG,kBAAOL,OAAP,EAAgBM,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBpB,YAAAA,OADiB,GACPC,SAAS,CAACoB,UAAV,CAAqB,MAArB,EAA6BnB,GAA7B,WAAoCkB,OAApC,GAA+CC,UAA/C,aAAsEnB,GAAtE,WAA6E,IAAIQ,IAAJ,EAA7E,EADO;AAAA;AAAA,mBAEjBV,OAAO,CAACW,GAAR,CAAY;AACdG,cAAAA,OAAO,EAAPA,OADc;AAEdQ,cAAAA,IAAI,EAAE,IAAIZ,IAAJ;AAFQ,aAAZ,CAFiB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXS,WAAW;AAAA;AAAA;AAAA,GAAjB;AAQP,OAAO,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAACH,OAAD,EAAa;AACpC,MAAI,CAACjC,QAAQ,CAAC4B,IAAT,CAAcC,MAAnB,EAA2B;AACvB7B,IAAAA,QAAQ,CAAC8B,aAAT,CAAuB7B,MAAvB;AACH;;AACDD,EAAAA,QAAQ,CAACc,SAAT,GAAqBoB,UAArB,CAAgC,MAAhC,EAAwCnB,GAAxC,WAA+CkB,OAA/C,GAA0DC,UAA1D,aAAiFG,KAAjF,CAAuF,SAAvF,EAAiG,GAAjG,EAAqG,EAArG,EAA0GC,OAA1G,CAAkH,MAAlH,EACCC,UADD,CACY,UAACC,IAAD,EAAU;AAClB,QAAIC,QAAQ,GAAG,EAAf;AACAD,IAAAA,IAAI,CAACE,OAAL,CAAa,UAAS3B,GAAT,EAAc;AACvB0B,MAAAA,QAAQ,CAACE,IAAT,CAAc5B,GAAG,CAACH,IAAJ,EAAd;AACH,KAFD;AAGAa,IAAAA,OAAO,CAACC,GAAR,CAAYe,QAAZ;AACH,GAPD;AAQH,CAZM;AAcP,OAAO,IAAMG,IAAI,GAAG5C,QAAQ,CAAC4C,IAAT,EAAb;AACP,OAAO,IAAM9B,SAAS,GAAEd,QAAQ,CAACc,SAAT,EAAjB;AAEP,IAAM+B,QAAQ,GAAG,IAAI7C,QAAQ,CAAC4C,IAAT,CAAcE,kBAAlB,EAAjB;AACAD,QAAQ,CAACE,mBAAT,CAA6B;AAACC,EAAAA,MAAM,EAAC;AAAR,CAA7B;AACA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,SAAML,IAAI,CAACM,eAAL,CAAqBL,QAArB,CAAN;AAAA,CAAzB;AAEP,IAAMM,gBAAgB,GAAG,IAAInD,QAAQ,CAAC4C,IAAT,CAAcQ,oBAAlB,EAAzB;AACAD,gBAAgB,CAACJ,mBAAjB,CAAqC;AAACC,EAAAA,MAAM,EAAC;AAAR,CAArC;AACA,OAAO,IAAMK,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAMT,IAAI,CAACM,eAAL,CAAqBC,gBAArB,WACjC,UAAAG,GAAG;AAAA,WAAIC,KAAK,CAAC,2DAAD,CAAT;AAAA,GAD8B,CAAN;AAAA,CAA3B;AAGP,eAAevD,QAAf","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyABugTRykVjU3cO3nkANbnArtyZ_TPix1Q\",\r\n    authDomain: \"raspberry-dacc1.firebaseapp.com\",\r\n    databaseURL: \"https://raspberry-dacc1.firebaseio.com\",\r\n    projectId: \"raspberry-dacc1\",\r\n    storageBucket: \"raspberry-dacc1.appspot.com\",\r\n    messagingSenderId: \"435336134829\",\r\n    appId: \"1:435336134829:web:36258d0b8bdb9bf9810624\",\r\n    measurementId: \"G-E4XKDDZNWV\"\r\n};\r\n\r\nexport const createUserProfileDocument = async (userAuth,data) => {\r\n    if (!userAuth) return;\r\n\r\n    const userRef = firestore.doc(`users/${userAuth.uid}`);\r\n    const snapshot = await userRef.get();\r\n\r\n    if (!snapshot.exists) {\r\n        const {displayName,email} = userAuth;\r\n        const createdAt = new Date()\r\n        try{\r\n            await userRef.set({\r\n                displayName,\r\n                email,\r\n                createdAt,\r\n                ...data,\r\n            })\r\n        \r\n        } catch (err) {\r\n            console.log('error creating user', err.message)\r\n        }\r\n    }\r\n    return userRef;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp(config);\r\n\r\n}\r\n\r\n\r\nexport const Fire = () => {\r\n        if (!firebase.apps.length) {\r\n            firebase.initializeApp(config)\r\n        }\r\n\r\n} \r\n\r\nexport const sendMessage = async (message, channel) => {\r\n    const userRef = firestore.collection('Chat').doc(`${channel}`).collection(`messages`).doc(`${new Date()}`)\r\n    await userRef.set({\r\n        message,\r\n        date: new Date()\r\n    })\r\n};\r\n\r\nexport const getMessages = (channel) => {\r\n    if (!firebase.apps.length) {\r\n        firebase.initializeApp(config)\r\n    }\r\n    firebase.firestore().collection('Chat').doc(`${channel}`).collection(`messages`).where('message','>','' ).orderBy('date')\r\n    .onSnapshot((docs) => {\r\n        var messages = [];\r\n        docs.forEach(function(doc) {\r\n            messages.push(doc.data());\r\n        });    \r\n        console.log(messages)\r\n    })\r\n}\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore =firebase.firestore();\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nprovider.setCustomParameters({prompt:'select_account'});\r\nexport const signInwithGoogle = () => auth.signInWithPopup(provider);\r\n\r\nconst facebookProvider = new firebase.auth.FacebookAuthProvider();\r\nfacebookProvider.setCustomParameters({prompt:'select_account'});\r\nexport const signInWithFacebook = () => auth.signInWithPopup(facebookProvider)\r\n.catch(err => alert('Your account is associated with a different Login method!'))\r\n\r\nexport default firebase;\r\n"]},"metadata":{},"sourceType":"module"}