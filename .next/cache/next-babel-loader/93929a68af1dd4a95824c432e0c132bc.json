{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\nimport React, { useState, Fragment } from 'react';\nimport { useRouter } from 'next/router';\nimport API_URL from '../../routes';\nimport { addMultipleItems as _addMultipleItems } from '../../src/redux/cart/cart.actions';\nimport { connect } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleUp, faAngleDown } from '@fortawesome/free-solid-svg-icons';\nimport Footer from '../../components/Footer/footer.component';\nimport Scrollbar from 'react-scrollbars-custom';\nimport ReviewForm from '../../components/Review/review.component';\nimport { motion } from 'framer-motion';\nvar easing = [.6, -.05, .01, .99];\nvar stagger = {\n  animate: {\n    transition: {\n      staggerChildren: 0.05\n    }\n  }\n};\nvar fadeInUp = {\n  initial: {\n    y: 60,\n    opacity: 0\n  },\n  animate: {\n    y: 0,\n    opacity: 1,\n    transition: {\n      duration: .3,\n      ease: easing\n    }\n  }\n};\n\nvar ItemPage = function ItemPage(_ref) {\n  var item = _ref.item,\n      addMultipleItems = _ref.addMultipleItems;\n\n  var _useState = useState(1),\n      quantity = _useState[0],\n      setQuantity = _useState[1];\n\n  var _useState2 = useState(0),\n      currentImage = _useState2[0],\n      setCurrentImage = _useState2[1];\n\n  var _useState3 = useState(item.comments ? item.comments.slice(0).reverse() : []),\n      comments = _useState3[0],\n      setComments = _useState3[1];\n\n  var onIncrease = function onIncrease() {\n    setQuantity(quantity + 1);\n  };\n\n  var onDecrease = function onDecrease() {\n    if (quantity === 1) {\n      null;\n    } else {\n      setQuantity(quantity - 1);\n    }\n  };\n\n  var addComments = function addComments(comment) {\n    return setComments([comment].concat(_toConsumableArray(comments)));\n  };\n\n  return __jsx(Fragment, null, __jsx(motion.div, {\n    className: \"item-details-container\",\n    exit: {\n      opacity: 0\n    },\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1,\n      transition: {\n        duration: 0.8\n      }\n    }\n  }, console.log(item), __jsx(\"div\", {\n    className: \"item-details\"\n  }, __jsx(\"div\", {\n    className: \"item-details-gallery\"\n  }, __jsx(motion.div, {\n    className: \"item-details-main-image\"\n  }, __jsx(motion.img, {\n    initial: {\n      x: 200,\n      opacity: 0\n    },\n    animate: {\n      x: 0,\n      opacity: 1,\n      transition: {\n        duration: 0.5\n      }\n    },\n    transition: {\n      delay: 0.2\n    },\n    alt: \"product-image\",\n    className: \"item-details-main-image-image\",\n    src: \"\".concat(API_URL).concat(item.gallery[currentImage].url)\n  })), __jsx(\"div\", {\n    className: \"item-details-thumbnails\"\n  }, item.gallery.slice(0, 3).map(function (image, index) {\n    return __jsx(\"img\", {\n      key: image.id,\n      className: \"item-details-thumbnails-image\",\n      alt: \"image-thumbnail\",\n      src: \"\".concat(API_URL).concat(image.formats.thumbnail.url),\n      onClick: function onClick() {\n        return setCurrentImage(index);\n      }\n    });\n  }))), __jsx(\"div\", {\n    className: \"item-details-text-content\"\n  }, __jsx(\"div\", {\n    className: \"item-details-name\"\n  }, item.name), __jsx(\"div\", {\n    className: \"item-details-price\"\n  }, __jsx(\"span\", {\n    className: \"item-details-previous-price\"\n  }, item.price * 1.2), __jsx(\"span\", {\n    className: \"item-details-current-price\"\n  }, item.price)), __jsx(\"div\", {\n    className: \"item-details-description\"\n  }, item.description), __jsx(\"div\", {\n    className: \"item-details-categories\"\n  }, \"CATEGORIES: \", item.categories.map(function (category, index) {\n    return __jsx(\"span\", {\n      key: index\n    }, category.name, \" \");\n  })), __jsx(\"div\", {\n    className: \"item-details-add-to-cart\"\n  }, __jsx(\"div\", {\n    className: \"item-details-quantity\"\n  }, __jsx(\"div\", {\n    className: \"item-details-quantity-text\"\n  }, quantity), __jsx(\"div\", {\n    className: \"item-details-quantity-navigation\"\n  }, __jsx(\"div\", {\n    className: \"item-details-quantity-arrows\",\n    onClick: onIncrease\n  }, __jsx(FontAwesomeIcon, {\n    icon: faAngleUp,\n    size: \"lg\"\n  })), __jsx(\"div\", {\n    className: \"item-details-quantity-arrows\",\n    onClick: onDecrease\n  }, __jsx(FontAwesomeIcon, {\n    icon: faAngleDown,\n    size: \"lg\"\n  })))), __jsx(\"button\", {\n    type: \"button\",\n    className: \"item-details-add-to-cart-button\",\n    onClick: function onClick() {\n      return addMultipleItems([item, quantity]);\n    }\n  }, \"ADD TO CART\")), __jsx(\"div\", {\n    className: \"item-comment-section\"\n  }, __jsx(\"span\", {\n    className: \"item-comment-section-title\"\n  }, \"Reviews:\"), comments.length ? __jsx(Scrollbar, {\n    style: {\n      height: '300px',\n      width: '100%'\n    }\n  }, comments.map(function (comment) {\n    return __jsx(\"div\", {\n      key: comment.id,\n      className: \"comment-text\"\n    }, __jsx(\"div\", {\n      className: \"item-comment-name\"\n    }, comment.name), __jsx(\"div\", {\n      className: \"item-comment-date\"\n    }, comment.date), __jsx(\"div\", {\n      className: \"item-comment-text\"\n    }, comment.text));\n  })) : __jsx(\"div\", {\n    className: \"no-comments\"\n  }, \"There are no reviews for this item yet.\"), __jsx(\"div\", {\n    className: \"review-container\"\n  }, __jsx(ReviewForm, {\n    item: item,\n    addComments: addComments\n  })))))), __jsx(Footer, null));\n};\n\nItemPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var query, resBouqet, dataBouqet;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            query = _ref2.query;\n            _context.next = 3;\n            return fetch(\"\".concat(API_URL, \"/bouquets/\").concat(query.item));\n\n          case 3:\n            resBouqet = _context.sent;\n            _context.next = 6;\n            return resBouqet.json();\n\n          case 6:\n            dataBouqet = _context.sent;\n            return _context.abrupt(\"return\", {\n              item: dataBouqet\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addMultipleItems: function addMultipleItems(item) {\n      return dispatch(_addMultipleItems(item));\n    }\n  };\n}; // export async function getServerSideProps(){\n//         const resBouqet = await fetch(`${API_URL}/bouquets/12`)\n//         const item = await resBouqet.json()\n//         return {props: {item}}\n//     }    \n\n\nexport default connect(null, mapDispatchToProps)(ItemPage);","map":null,"metadata":{},"sourceType":"module"}