{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\bonaf\\\\Desktop\\\\Projects\\\\Ecommerce\\\\Malinka\\\\frontend\\\\malinka\\\\components\\\\Chat\\\\chat.component.jsx\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Fragment } from 'react';\nimport AreaInput from '../AreaInput/area-input.component';\nimport { sendMessage } from '../../firebase/firebase.utils';\nimport { connect } from 'react-redux';\nimport { setMessages as _setMessages } from '../../src/redux/chat/chat.actions';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { motion } from 'framer-motion';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowUp } from '@fortawesome/free-solid-svg-icons';\n\nvar Chat = /*#__PURE__*/function (_React$Component) {\n  _inherits(Chat, _React$Component);\n\n  var _super = _createSuper(Chat);\n\n  function Chat() {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function (channel) {\n      if (!firebase.apps.length) {\n        firebase.initializeApp({\n          apiKey: \"AIzaSyABugTRykVjU3cO3nkANbnArtyZ_TPix1Q\",\n          authDomain: \"raspberry-dacc1.firebaseapp.com\",\n          databaseURL: \"https://raspberry-dacc1.firebaseio.com\",\n          projectId: \"raspberry-dacc1\",\n          storageBucket: \"raspberry-dacc1.appspot.com\",\n          messagingSenderId: \"435336134829\",\n          appId: \"1:435336134829:web:36258d0b8bdb9bf9810624\",\n          measurementId: \"G-E4XKDDZNWV\"\n        });\n      }\n\n      firebase.firestore().collection('Chat').doc(\"\".concat(channel)).collection(\"messages\").where('text', '>', '').onSnapshot(function (docs) {\n        var messages = [];\n        docs.forEach(function (doc) {\n          messages.push(doc.data());\n        });\n\n        _this.props.setMessages(messages);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var userRef;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.next = 3;\n                return sendMessage(_this.state.text, _this.props.channel);\n\n              case 3:\n                userRef = _context.sent;\n                console.log(userRef);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      _this.setState({\n        text: event.target.value\n      });\n    });\n\n    _this.state = {\n      text: ''\n    };\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var channel = this.props.channel;\n      this.unsubscribe(channel);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          messages = _this$props.messages,\n          channel = _this$props.channel;\n      return __jsx(motion.div, {\n        className: \"chat-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"chat-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }, __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }\n      }, \"Company Name\")), __jsx(\"div\", {\n        className: \"messages-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      }, messages ? messages.map(function (message) {\n        return __jsx(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 44\n          }\n        }, message.text);\n      }) : null), __jsx(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, __jsx(AreaInput, {\n        className: \"message-box\",\n        name: \"text\",\n        handleChange: this.handleChange,\n        value: this.state.text,\n        placeholder: \"Type your message here...\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }), __jsx(\"input\", {\n        className: \"message-send-button\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, \"Send\")));\n    }\n  }]);\n\n  return Chat;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    messages: state.chat.messages,\n    channel: state.chat.channel\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setMessages: function setMessages(messages) {\n      return dispatch(_setMessages(messages));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);","map":{"version":3,"sources":["C:/Users/bonaf/Desktop/Projects/Ecommerce/Malinka/frontend/malinka/components/Chat/chat.component.jsx"],"names":["React","Fragment","AreaInput","sendMessage","connect","setMessages","firebase","motion","FontAwesomeIcon","faArrowUp","Chat","channel","apps","length","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","collection","doc","where","onSnapshot","docs","messages","forEach","push","data","props","event","preventDefault","state","text","userRef","console","log","setState","target","value","unsubscribe","map","message","handleSubmit","handleChange","Component","mapStateToProps","chat","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Fragment} from 'react'\r\nimport AreaInput from '../AreaInput/area-input.component';\r\nimport {sendMessage} from '../../firebase/firebase.utils';\r\nimport {connect} from 'react-redux'; \r\nimport {setMessages} from '../../src/redux/chat/chat.actions';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport {motion} from 'framer-motion';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport {faArrowUp} from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass  Chat extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            text:'',\r\n        }\r\n    }\r\n\r\n    unsubscribe = (channel) => {\r\n        \r\n            if (!firebase.apps.length) {\r\n                firebase.initializeApp({\r\n                    apiKey: \"AIzaSyABugTRykVjU3cO3nkANbnArtyZ_TPix1Q\",\r\n                    authDomain: \"raspberry-dacc1.firebaseapp.com\",\r\n                    databaseURL: \"https://raspberry-dacc1.firebaseio.com\",\r\n                    projectId: \"raspberry-dacc1\",\r\n                    storageBucket: \"raspberry-dacc1.appspot.com\",\r\n                    messagingSenderId: \"435336134829\",\r\n                    appId: \"1:435336134829:web:36258d0b8bdb9bf9810624\",\r\n                    measurementId: \"G-E4XKDDZNWV\"\r\n                })\r\n            }\r\n                 \r\n            \r\n        \r\n            firebase.firestore().collection('Chat').doc(`${channel}`).collection(`messages`).where('text','>','' )\r\n            .onSnapshot((docs) => {\r\n                const messages=[] \r\n                docs.forEach(function(doc) {\r\n                    messages.push(doc.data());\r\n                });\r\n                this.props.setMessages(messages)    \r\n                       \r\n            })\r\n                        \r\n        \r\n    }\r\n\r\n    componentDidMount() {\r\n        const {channel} = this.props\r\n        this.unsubscribe(channel)\r\n    }\r\n\r\n\r\n    \r\n\r\n    handleSubmit = async event => {\r\n        event.preventDefault();\r\n        const userRef = await sendMessage(this.state.text, this.props.channel);\r\n        console.log(userRef)\r\n    }\r\n\r\n\r\n    handleChange = event => {\r\n\r\n\r\n            this.setState({text:event.target.value})\r\n\r\n    }\r\n    render () {\r\n        const {messages,channel} = this.props\r\n        return (\r\n            <motion.div className='chat-container'>\r\n                <div className='chat-title'>\r\n                    <p>Company Name</p>\r\n                </div>\r\n                <div className='messages-container'>\r\n                {   messages ?\r\n                    messages.map(message=> <p>{message.text}</p>)\r\n                    :null\r\n                }\r\n                </div>\r\n                <form onSubmit={this.handleSubmit}>\r\n\r\n\r\n                    <AreaInput \r\n                    className='message-box'\r\n                    name='text'\r\n                    handleChange={this.handleChange}\r\n                    value={this.state.text}\r\n                    placeholder='Type your message here...'\r\n                    required\r\n                    />       \r\n\r\n                    <input className='message-send-button' type='submit'>\r\n                        Send\r\n                    </input>\r\n\r\n                </form>\r\n            </motion.div>\r\n            \r\n    )}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    messages: state.chat.messages,\r\n    channel: state.chat.channel\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    setMessages: messages => dispatch(setMessages(messages))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);"]},"metadata":{},"sourceType":"module"}