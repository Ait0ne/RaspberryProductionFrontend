{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{BbTs:function(e,t,n){\"use strict\";var a=n(\"q1tI\"),c=n.n(a);t.a=function(e){var t=e.children,n=e.onClick,r=(e.ref,c.a.Children.map(t,(function(){return Object(a.useRef)()}))),s=function(e){r.every((function(t){return console.log(t.current,e.target),!t.current.contains(e.target)}))&&n()};return Object(a.useEffect)((function(){return document.addEventListener(\"click\",s),function(){document.removeEventListener(\"click\",s)}})),c.a.Children.map(t,(function(e,t){return c.a.cloneElement(e,{ref:r[t]})}))}},EScC:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/chatPage\",function(){return n(\"nYsW\")}])},NWXo:function(e,t,n){\"use strict\";var a=n(\"q1tI\"),c=n.n(a),r=n(\"o0o1\"),s=n.n(r),i=n(\"HaE+\"),u=n(\"1OyB\"),o=n(\"vuIU\"),l=n(\"JX7q\"),d=n(\"Ji7U\"),f=n(\"md7G\"),p=n(\"foSv\"),h=n(\"rePB\"),b=n(\"glag\"),m=n(\"/VX3\"),g=n(\"/MKj\"),v=n(\"nQfG\"),y=n(\"Wcq6\"),j=n.n(y),O=(n(\"5x/H\"),n(\"ZMKu\")),w=n(\"IP2g\"),E=n(\"wHSu\"),N=n(\"BbTs\"),x=c.a.createElement;function C(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(p.a)(e);if(t){var c=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var S=function(e){Object(d.a)(n,e);var t=C(n);function n(){var e;return Object(u.a)(this,n),e=t.call(this),Object(h.a)(Object(l.a)(e),\"unsubscribe\",(function(t){j.a.apps.length||j.a.initializeApp({apiKey:\"AIzaSyABugTRykVjU3cO3nkANbnArtyZ_TPix1Q\",authDomain:\"raspberry-dacc1.firebaseapp.com\",databaseURL:\"https://raspberry-dacc1.firebaseio.com\",projectId:\"raspberry-dacc1\",storageBucket:\"raspberry-dacc1.appspot.com\",messagingSenderId:\"435336134829\",appId:\"1:435336134829:web:36258d0b8bdb9bf9810624\",measurementId:\"G-E4XKDDZNWV\"}),j.a.firestore().collection(\"Chat\").doc(\"\".concat(t)).collection(\"messages\").where(\"createdAt\",\">\",1590246123874).orderBy(\"createdAt\",\"desc\").onSnapshot((function(t){var n=[];t.forEach((function(e){n.push(e.data())})),e.props.setMessages(n),e.props.setNewMessages(!0)}))})),Object(h.a)(Object(l.a)(e),\"listener\",function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(\"Enter\"!==n.code&&\"NumpadEnter\"!==n.code){t.next=6;break}return console.log(\"Enter key was pressed. Run your function.\"),t.next=4,Object(m.c)(e.state.text,e.props.channel);case 4:t.sent,e.setState({text:\"\"});case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(h.a)(Object(l.a)(e),\"handleSubmit\",function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Object(m.c)(e.state.text,e.props.channel);case 3:t.sent,e.setState({text:\"\"});case 5:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(h.a)(Object(l.a)(e),\"handleChange\",(function(t){e.setState({text:t.target.value})})),e.state={text:\"\"},e}return Object(o.a)(n,[{key:\"componentDidMount\",value:function(){var e=this.props.channel;this.unsubscribe(e),document.addEventListener(\"keydown\",this.listener)}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"keydown\",this.listener)}},{key:\"render\",value:function(){var e=this.props,t=e.messages,n=e.channel,a=e.toggleChatHidden,c=e.setNewMessages;return x(O.b.div,{initial:\"initial\",animate:\"animate\"},x(N.a,{onClick:function(){a(),c(!1)}},x(O.b.div,{initial:{width:\"0px\",opacity:0},animate:{width:\"336px\",opacity:1,transition:{duration:.3,staggerChildren:.09}},className:\"chat-container\"},x(\"div\",{className:\"chat-title\"},x(\"p\",null,\"Company Name\")),x(\"div\",{className:\"messages-container\"},t?t.map((function(e){return x(O.b.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1,duration:.8}},className:\"\".concat(e.user.id===n?\"message-user\":\"message-support\",\" chat-message\")},e.text)})):null),x(\"form\",{onSubmit:this.handleSubmit},x(b.a,{className:\"message-box\",name:\"text\",handleChange:this.handleChange,value:this.state.text,placeholder:\"Type your message here...\",required:!0}),x(\"button\",{className:\"message-send-button\",type:\"submit\"},x(w.a,{className:\"message-send-button-icon\",icon:E.c,size:\"lg\"}))))))}}]),n}(c.a.Component),k=Object(g.b)((function(e){return{messages:e.chat.messages,channel:e.chat.channel,chatHidden:e.chat.chatHidden}}),(function(e){return{setMessages:function(t){return e(Object(v.b)(t))},setNewMessages:function(t){return e(Object(v.c)(t))},toggleChatHidden:function(){return e(Object(v.d)())}}}))(S),H=c.a.createElement,M=Object(g.b)((function(e){return{newMessages:e.chat.newMessages,chatHidden:e.chat.chatHidden}}),(function(e){return{setNewMessages:function(t){return e(Object(v.c)(t))},toggleChatHidden:function(){return e(Object(v.d)())}}}))((function(e){var t=e.newMessages,n=e.setNewMessages,a=e.toggleChatHidden,c=e.chatHidden;return H(\"div\",{className:\"chat-button\",onClick:function(){a(),n(!1)}},t&&c?H(\"div\",{className:\"new-messages\"}):null,H(w.a,{className:\"chat-button-icon\",icon:E.g,size:\"2x\"}))})),T=c.a.createElement;t.a=Object(g.b)((function(e){return{chatHidden:e.chat.chatHidden}}))((function(e){var t=e.chatHidden;return T(a.Fragment,null,t?null:T(k,null),T(M,null))}))},glag:function(e,t,n){\"use strict\";var a=n(\"wx14\"),c=n(\"Ff2n\"),r=n(\"q1tI\"),s=n.n(r).a.createElement;t.a=function(e){var t=e.handleChange,n=e.label,r=Object(c.a)(e,[\"handleChange\",\"label\"]);return s(\"div\",{className:\"group\"},s(\"textarea\",Object(a.a)({className:\"form-input\",onChange:t},r)),n?s(\"label\",{className:\"\".concat(r.value.length?\"shrink\":\"\",\" form-input-label\")},n):null)}},nQfG:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return a})),n.d(t,\"b\",(function(){return c})),n.d(t,\"c\",(function(){return r})),n.d(t,\"d\",(function(){return s}));var a=function(e){return{type:\"SET_CHANNEL\",payload:e}},c=function(e){return{type:\"SET_MESSAGES\",payload:e}},r=function(e){return{type:\"SET_NEW_MESSAGES\",payload:e}},s=function(){return{type:\"TOGGLE_CHAT_HIDDEN\"}}},nYsW:function(e,t,n){\"use strict\";n.r(t);var a=n(\"NWXo\"),c=n(\"q1tI\"),r=n.n(c).a.createElement;t.default=function(){return r(\"div\",{style:{marginTop:\"100px\"}},r(a.a,null))}}},[[\"EScC\",1,2,5,8,10,11,0,3,6,7,9]]]);","extractedComments":[]}